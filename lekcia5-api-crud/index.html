<!DOCTYPE html><html lang="sk"><head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>React pre začiatočníkov - summer 2022 - undefined</title>

    
</head>
<body>

<div class="container">
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
        <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
            <span class="fs-4">React pre začiatočníkov</span>
        </a>

        <ul class="nav nav-pills">
            <li class="nav-item">
                <a href="#" class="nav-link" aria-current="page">Lekcie</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">Stránka kurzu</a>
            </li>
        </ul>
    </header>
</div>



<link rel="stylesheet" href="../assets/index.05bf3ab7.css"><link rel="stylesheet" href="../assets/sidebar.580b0102.css"><div class="container">
            <h1>Lekcia 5 - Pripojenie na API</h1>
        </div><main>
            <div class="container">
                <h2 id="crud-s-použitím-api">CRUD s použitím API</h2><p>Základné operácie s dátami často nazývame aj CRUD. Jednotlivé písmená tejto skratky pomenúvajú základné operácie, ktoré je možné s dátami robiť.</p><ul>
<li><strong>C</strong>reate</li>
<li><strong>R</strong>ead</li>
<li><strong>U</strong>pdate</li>
<li><strong>D</strong>elete</li>
</ul><p>V ToDo aplikácii sme zatiaľ implementovali operáciu Read. Témou nasledujúceho cvičenia bude teda implementácia operácii Create, Update a Delete.</p><h3 id="create">Create</h3>
Pre vytvorenie nového tasku využijeme API endpoint zdokumentovaný na

<a href="https://todo.eragon.digital/#endpoints-POSTapi-tasks" target="_blank">
</a><a href="https://todo.eragon.digital/#endpoints-POSTapi-tasks">https://todo.eragon.digital/#endpoints-POSTapi-tasks</a>

.
<p>Tento endpoint očakáva request typu <code data-astro-raw="">POST</code>.</p><p>Hlavným rozdielom pri volaní endpointu requestom typu <code data-astro-raw="">POST</code> voči <code data-astro-raw="">GET</code> spočíva v pridaní dalšieho parametra ktorý obsahuje dáta odoslané v requeste.</p><pre class="language-js"><code data-astro-raw="" class="language-js">axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'URL'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">atribut1</span><span class="token operator">:</span> <span class="token string">'Hodnota 1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">atribut2</span><span class="token operator">:</span> <span class="token string">'Hodnota 2'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Post request pre vytvorenie nového tasku bude teda</p><pre class="language-js"><code data-astro-raw="" class="language-js"><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_API_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/tasks?api_token=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_API_TOKEN</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">text</span><span class="token operator">:</span> input
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Ideálne miesto pre poslanie requestu na endpoint je vo funkcii <code data-astro-raw="">function handleSubmit(e)</code> ktorá je vykonaná po odoslaní formulára.</p><p>Keďže v tejto metóde chceme použiť kľúčové slovo <code data-astro-raw="">await</code> v pre asynchrónne správanie metódy <code data-astro-raw="">axios.post</code> definíciu funkcie musíme rozšíriť o kľúčové slovo <code data-astro-raw="">async</code>.</p><p>Odpoveď z tohto endpointu obsahuje dáta vo formáte určenom pre zobrazenie v našej aplikácii.</p><p>Túto odpoveď preto využijeme pre uloženie novo vytvoreného tasku do našeho state atribútu <code data-astro-raw="">tasks</code>.</p><p>Finálna implementácia vytvorenie nového tasku je na gite:
<a href="https://github.com/slavokozar/react-pre-zaciatocnikov-todo-project/blob/api-crud/src/App.js">https://github.com/slavokozar/react-pre-zaciatocnikov-todo-project/blob/api-crud/src/App.js</a></p><h3 id="update">Update</h3><p>Pre úpravu existujúceho tasku využijeme api endpoint <a href="http://todo.eragon.digital/#endpoints-PUTapi-tasks--id-">http://todo.eragon.digital/#endpoints-PUTapi-tasks—id-</a></p><p>Tento endpoint definovaný podľa REST štandardu - používa request typu <code data-astro-raw="">PUT</code>, alebo <code data-astro-raw="">PATCH</code>.</p><p>Tento typ requestu - podobne ako request typu <code data-astro-raw="">POST</code> posiela na server data.</p><p>Základná syntax odoslania requestu typu <code data-astro-raw="">PUT</code></p><pre class="language-js"><code data-astro-raw="" class="language-js">axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'URL'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">atribut1</span><span class="token operator">:</span> <span class="token string">'Hodnota 1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">atribut2</span><span class="token operator">:</span> <span class="token string">'Hodnota 2'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-js"><code data-astro-raw="" class="language-js">axios<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token string">'URL'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">atribut1</span><span class="token operator">:</span> <span class="token string">'Hodnota 1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">atribut2</span><span class="token operator">:</span> <span class="token string">'Hodnota 2'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Pre účely úpravy existujúceho tasku vytvoríme novú asynchrónnu funkciu handleActiveChange s parametrami <code data-astro-raw="">task</code> - objekt tasku, ktorý chceme upraviť a <code data-astro-raw="">active</code> - novú hodnotu atribútu active tohto tasku.</p><p>Táto funkcia odošle request na API a následne upraví task v state aplikácie.</p><p>Finálna implementácia úpravy tasku je na gite:
<a href="https://github.com/slavokozar/react-pre-zaciatocnikov-todo-project/blob/api-crud/src/App.js">https://github.com/slavokozar/react-pre-zaciatocnikov-todo-project/blob/api-crud/src/App.js</a></p><hr><p><strong>Tip!</strong></p><p>Pre úpravu stavu obsahujúcom tasky v ToDo aplikácii sme používali <code data-astro-raw="">index</code> tohto tasku v poli.</p><p>V prípade, že sme napojení na API máme možnosť využiť unikátny identifikátor <code data-astro-raw="">id</code> ktorý obsahuje každý task.</p><hr><p><strong>Tip!</strong></p><p>Doteraz sme pre detekovanie udalostí používali arraw funkcie.
Napríklad:</p><pre class="language-jsx"><code data-astro-raw="" class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code></pre><p>Ak v tejto funkcii chceme použiť kľúčové slovo <code data-astro-raw="">async</code> funkcia musí byť definovaná ako asynchrónna. To v tomto prípade nie je možné.
V praxi sa tento problém rieši definovaním asynchrónnej funkcie a následne volaním tejto funkcie v event listeneri.</p><pre class="language-jsx"><code data-astro-raw="" class="language-jsx"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code></pre><h3 id="delete">Delete</h3><p>Pre úpravu existujúceho tasku využijeme api endpoint <a href="http://todo.eragon.digital/#endpoints-DELETEapi-tasks--id-">http://todo.eragon.digital/#endpoints-DELETEapi-tasks—id-</a></p><p>Finálna implementácia vymazania tasku je na gite:
<a href="https://github.com/slavokozar/react-pre-zaciatocnikov-todo-project/blob/api-crud/src/App.js">https://github.com/slavokozar/react-pre-zaciatocnikov-todo-project/blob/api-crud/src/App.js</a></p>
            </div>
        </main>


<div class="container">
    <footer class="py-3 my-4">
        <ul class="nav justify-content-center border-bottom pb-3 mb-3">
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Lekcie</a></li>
            <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Stránka kurzu</a></li>
            <!--<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Pricing</a></li>-->
            <!--<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>-->
            <!--<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>-->
        </ul>
        <p class="text-center text-muted">
            © 2022 Ing. Slavomír Kožár &amp;&amp; <a href="https://innovis.sk" target="_blank">innovis s.r.o.</a>
        </p>
    </footer>
</div>



</body></html>